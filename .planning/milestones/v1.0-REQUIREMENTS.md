# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-03
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Water Cup Driving Coach

**Defined:** 2026-02-01
**Core Value:** Real-time audio feedback that trains smooth driving through muscle memory, without visual distraction.

## v1 Requirements

Requirements for initial release. Each maps to roadmap phases.

### Sensor Processing

- [x] **SENS-01**: Accelerometer captures lateral and longitudinal G-forces at 50Hz sampling rate
- [x] **SENS-02**: Gyroscope captures yaw rate for rotation detection
- [x] **SENS-03**: GPS provides speed context and location during drives
- [x] **SENS-04**: Low-pass filter (1-2Hz cutoff) removes road vibration from sensor data
- [x] **SENS-05**: Gravity compensation isolates movement from phone tilt/orientation

### Smoothness Engine

- [x] **SMTH-01**: Jerk calculation per axis (dG / dt) measures rate of G-force change
- [x] **SMTH-02**: Combined jerk computed via RMS (sqrt(jerkLat^2 + jerkLong^2))
- [x] **SMTH-03**: Spill risk normalization produces 0-1 value based on jerk vs threshold
- [x] **SMTH-04**: Rolling window (~500ms) smooths transient spikes
- [x] **SMTH-05**: Three difficulty levels with distinct thresholds (Easy: 0.5 G/s, Experienced: 0.3 G/s, Master: 0.15 G/s)

### Pothole Detection

- [x] **POTH-01**: Z-axis spike detection identifies potholes (<300ms duration spikes)
- [x] **POTH-02**: Difficulty-aware forgiveness (Easy/Experienced forgive potholes, Master counts as spills)

### Audio Feedback

- [x] **AUDI-01**: Water slosh sounds play when spill risk exceeds threshold (Easy: 0.6, Experienced: 0.4, Master: 0.25)
- [x] **AUDI-02**: Splash sound plays on spill event
- [x] **AUDI-03**: Difficulty-specific audio behavior (Master has ambient hum, dramatic splash + streak broken)
- [?] **AUDI-04**: Audio feedback latency under 100ms from sensor input to sound — *verified on device, needs formal documentation*
- [x] **AUDI-05**: Audio ducks and mixes properly with other audio sources (music, podcasts)

### Drive Detection & Recording

- [x] **DRIV-01**: Auto-start when GPS speed > 15 km/h for 5+ seconds
- [x] **DRIV-02**: Auto-stop when GPS speed < 5 km/h for 60+ seconds
- [x] **DRIV-03**: Manual start/stop override always available
- [x] **DRIV-04**: GPS breadcrumbs recorded every 5 seconds during drive
- [x] **DRIV-05**: Events logged with timestamp, type, location, and severity

### Scoring & Metrics

- [x] **SCOR-01**: Smoothness score (0-100) calculated for each drive
- [x] **SCOR-02**: Spill count tracked per drive
- [x] **SCOR-03**: Pothole count tracked per drive
- [x] **SCOR-04**: Event severity tracked (how far over threshold)

### App Screens

- [x] **SCRN-01**: Home screen displays start button, difficulty selector, and recent drives summary
- [x] **SCRN-02**: Active drive screen shows minimal UI with spill count and current streak
- [x] **SCRN-03**: Drive summary screen displays post-drive stats, map with event markers, and score breakdown
- [x] **SCRN-04**: History screen lists past drives with filtering by difficulty and sorting by score/date
- [x] **SCRN-05**: Settings screen provides difficulty selection, audio volume, auto-start toggle, and sensor calibration

### Platform & Infrastructure

- [x] **PLAT-01**: App runs on iOS via React Native / Expo
- [x] **PLAT-02**: App runs on Android via React Native / Expo
- [x] **PLAT-03**: Background execution allows drive detection and recording with screen off
- [x] **PLAT-04**: SQLite database stores drive history and events locally
- [?] **PLAT-05**: Battery-efficient background operation (<10% for 1-hour drive) — *requires physical device testing*

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| SENS-01 | Phase 1 | Complete |
| SENS-02 | Phase 1 | Complete |
| SENS-03 | Phase 2 | Complete |
| SENS-04 | Phase 1 | Complete |
| SENS-05 | Phase 1 | Complete |
| SMTH-01 | Phase 1 | Complete |
| SMTH-02 | Phase 1 | Complete |
| SMTH-03 | Phase 1 | Complete |
| SMTH-04 | Phase 1 | Complete |
| SMTH-05 | Phase 5 | Complete |
| POTH-01 | Phase 5 | Complete |
| POTH-02 | Phase 5 | Complete |
| AUDI-01 | Phase 1 | Complete |
| AUDI-02 | Phase 1 | Complete |
| AUDI-03 | Phase 5 | Complete |
| AUDI-04 | Phase 1 | Human verify |
| AUDI-05 | Phase 1 | Complete |
| DRIV-01 | Phase 2 | Complete |
| DRIV-02 | Phase 2 | Complete |
| DRIV-03 | Phase 2 | Complete |
| DRIV-04 | Phase 3 | Complete |
| DRIV-05 | Phase 3 | Complete |
| SCOR-01 | Phase 3 | Complete |
| SCOR-02 | Phase 3 | Complete |
| SCOR-03 | Phase 3 | Complete |
| SCOR-04 | Phase 3 | Complete |
| SCRN-01 | Phase 4 | Complete |
| SCRN-02 | Phase 4 | Complete |
| SCRN-03 | Phase 4 | Complete |
| SCRN-04 | Phase 4 | Complete |
| SCRN-05 | Phase 4 | Complete |
| PLAT-01 | Phase 4 | Complete |
| PLAT-02 | Phase 4 | Complete |
| PLAT-03 | Phase 2 | Complete |
| PLAT-04 | Phase 3 | Complete |
| PLAT-05 | Phase 2 | Human verify |

**Coverage:**
- v1 requirements: 36 total
- Complete: 34
- Human verification needed: 2 (AUDI-04, PLAT-05)

---

## Milestone Summary

**Shipped:** 34 of 36 v1 requirements (code complete)
**Human verification needed:** 2 (AUDI-04 audio latency, PLAT-05 battery efficiency)
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-03 as part of v1.0 milestone completion*
